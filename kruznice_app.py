# -*- coding: utf-8 -*-
"""Untitled1.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1IiiKY6hp7XU-Hdod0PMGxpo-M7X6YaA-
"""

import streamlit as st
import matplotlib.pyplot as plt
import numpy as np
from fpdf import FPDF
import tempfile
import os

# Titulek aplikace
st.set_page_config(page_title="Body na kru≈ænici", layout="centered")
st.title("üü¢ Body na kru≈ænici")

# Vstupn√≠ parametry
st.sidebar.header("üéõÔ∏è Parametry")
x0 = st.sidebar.number_input("X sou≈ôadnice st≈ôedu", value=0.0)
y0 = st.sidebar.number_input("Y sou≈ôadnice st≈ôedu", value=0.0)
r = st.sidebar.number_input("Polomƒõr kru≈ænice", value=1.0, min_value=0.01)
n = st.sidebar.slider("Poƒçet bod≈Ø", min_value=3, max_value=100, value=10)
barva = st.sidebar.color_picker("Barva bod≈Ø", "#FF0000")
jednotka = st.sidebar.selectbox("Jednotka", ["m", "cm", "mm"])

# V√Ωpoƒçet bod≈Ø
theta = np.linspace(0, 2*np.pi, n, endpoint=False)
x = x0 + r * np.cos(theta)
y = y0 + r * np.sin(theta)

# Vykreslen√≠ grafu
fig, ax = plt.subplots()
ax.scatter(x, y, color=barva, label="Body")
ax.set_aspect('equal')
ax.set_xlabel(f"X ({jednotka})")
ax.set_ylabel(f"Y ({jednotka})")
ax.grid(True)
ax.set_title("Rozlo≈æen√≠ bod≈Ø na kru≈ænici")
st.pyplot(fig)

# Informace o aplikaci
with st.expander("‚ÑπÔ∏è O aplikaci"):
    st.markdown("""
    **Autor:** Jan Nov√°k
    **Kontakt:** jan.novak@example.com
    **Pou≈æit√© technologie:**
    - Python
    - Streamlit
    - Matplotlib
    - FPDF
    """)

# Export do PDF
if st.button("üñ®Ô∏è Exportovat do PDF"):
    pdf = FPDF()
    pdf.add_page()
    pdf.set_font("Arial", size=12)
    pdf.cell(200, 10, txt="Parametry √∫lohy - Body na kru≈ænici", ln=True, align='C')
    pdf.ln(10)
    pdf.cell(200, 10, txt=f"St≈ôed: ({x0}, {y0})", ln=True)
    pdf.cell(200, 10, txt=f"Polomƒõr: {r} {jednotka}", ln=True)
    pdf.cell(200, 10, txt=f"Poƒçet bod≈Ø: {n}", ln=True)
    pdf.cell(200, 10, txt=f"Barva bod≈Ø: {barva}", ln=True)
    pdf.cell(200, 10, txt="Autor: Jan Nov√°k", ln=True)
    pdf.cell(200, 10, txt="Kontakt: jan.novak@example.com", ln=True)

    # Ulo≈æen√≠ do doƒçasn√©ho souboru
    with tempfile.NamedTemporaryFile(delete=False, suffix=".pdf") as tmpfile:
        pdf.output(tmpfile.name)
        st.download_button("üì• St√°hnout PDF", data=open(tmpfile.name, "rb").read(), file_name="kruznice.pdf", mime="application/pdf")
        os.unlink(tmpfile.name)